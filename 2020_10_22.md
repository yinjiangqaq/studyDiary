## nginx 代理

nginx 代理分为正向代理和反向代理，正向代理和反向代理的区别就是代理的对象不一样，正向代理代理的对象是客户端，反向代理代理的对象是服务端。

### 正向代理

我们日常的科学上网就可以用 Nginx 做正向代理

```
server {
    location / {
        proxy_pass http://$http_host$request_uri;
    }
}
```

### 反向代理

nginx 作为 web 服务器的一个重要功能就是反向代理。

nginx 反向代理的指令不需要新增额外的模块，默认自带 proxy_pass 指令，只需要修改配置文件就可以实现反向代理

### 什么是反向代理服务器

反向代理的功能是 nginx 的三大主要功能之一（静态 web 服务器、反向代理、负载均衡）。nginx 一般同时做为静态 web 服务器和反向代理服务器，做为 web 服务器访问静态文件图片、css、js、html 等文件，做为反向代理服务器把请求发给后端业务处理服务，**如果有多个后端处理节点，会配置负载均衡功能**。

反向代理服务器是一种代理服务器，用于管理从外部网络到内部网络的连接或任何特定请求。它保护、路由和管理从外部网络到内部网络、Web 服务器或专用网络的流量。

```

外网客户机---nginx反向代理---内网web服务
```

**外网客户机**：我们平时打开浏览器输入网址访问www.nginx.cn的场景中，我们的笔记本就可以理解为一个外网客户机。

**nginx 反向代理服务**：浏览器输入网址并回车后，会发起一个 http 请求给 nginx（反向代理服务器），这个请求如果是访问静态文件，那么 nginx 作为 web 服务器直接返回请求的内容，如果是访问的后台服务逻辑，那么 nginx 把**请求转发**给后端的服务处理。

**内网 web 服务**：后端的服务可以是很多种类型，LNMP 环境下的 php-fpm 进程，Java 环境下的 tomcat、jetty 等容器，通过程序逻辑处理 http 请求，生成 html 页面或者 json 串返回给客户端。对于小型应用，后端服务可以和 nginx 部署在同一台机器上。

## 反向代理的好处

- nginx 反向代理重要的作用是配合 upstream 实现负载均衡。
- 同时增加安全性，客户端不能直接访问后端服务，多了个中间的屏障。
- 提升并发处理能力，通过异步非阻塞的方式把请求发给后端。

## set 和 map 的区别

set 是一种关联式容器，其特性如下：

- set 以 RBTree 作为底层容器
- 所得元素的只有 key 没有 value，value 就是 key
- 不允许出现键值重复
- 所有的元素都会被自动排序
- 不能通过迭代器来改变 set 的值，因为 set 的值就是键
  map 和 set 一样是关联式容器，它们的底层容器都是红黑树，区别就在于 map 的值不作为键，键和值是分开的。它的特性如下：

- map 以 RBTree 作为底层容器
- 所有元素都是键+值存在
- 不允许键重复
- 所有元素是通过键进行自动排序的
- map 的键是**不能修改**的，但是其键对应的值是可以修改的

## v-for 和 v-if 的优先级

v-for 和 v-if 如果是同一层级的话，v-for 的优先级是高于 v-if 的 .

所以想要 v-if 有用，需要把 v-if 放在上一层级
